require('newrelic');!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n.w={},n(n.s=20)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("express")},function(e,t,n){"use strict";var r=n(8);e.exports=function(e){return r.find({id:e}).then(function(e){return e[0].opening_hours=e[0].opening_hours.split('"').join("").split("~"),e[0].opening_hours=e[0].opening_hours.map(function(e){return e.split("^")}),e[0]})}},function(e,t){e.exports=require("underscore")},function(e,t){e.exports=require("axios")},function(e,t,n){"use strict";var r=n(1).Router(),a=n(2);r.get("/:id/sidebar",function(e,t){var n=e.params.id;n=parseInt(n),console.log("Retrieving id: ",n),a(n).then(function(e){t.send(e)})}),e.exports=r},function(e,t){e.exports=require("mysql")},function(e,t){e.exports=require("bluebird")},function(e,t,n){"use strict";var r=n(7),a=n(6).createPool({connectionLimit:100,host:"172.31.18.188",user:"remote",password:"",database:"wegot"});t.find=function(e){return new r(function(t,n){a.getConnection(function(r,a){a.query("SELECT * FROM restaurants WHERE id="+e.id,function(e,r){return a.release(),e?n(e):t(r)})})})}},function(e,t,n){"use strict";var r=n(1),a=r.Router();n(2);a.use("/:id",r.static("client/dist")),e.exports=a},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("morgan")},function(e,t){e.exports=require("cors")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("google-maps-react")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapContainer=void 0;var r,a=n(0),i=(r=a)&&r.__esModule?r:{default:r},o=n(14);var s=t.MapContainer=function(e){return i.default.createElement("div",{className:"sidebar-map-container"},i.default.createElement(o.Map,{google:e.google,zoom:16,initialCenter:{lng:e.lng,lat:e.lat},style:{height:"320px",width:"280px"}},i.default.createElement(o.Marker,{position:{lng:e.lng,lat:e.lat},icon:"http://res.cloudinary.com/madlicorice/image/upload/v1520470825/map_icon_small.png"})))};t.default=(0,o.GoogleApiWrapper)({apiKey:"AIzaSyAZeaxvjPuMA8T8pyjr7Fkld8zLYgtn8Mo"})(s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Periods=t.OpeningHours=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=o(n(0)),i=o(n(3));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showPeriods:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"clickHandler",value:function(e){this.setState({showPeriods:!this.state.showPeriods})}},{key:"getOpenNow",value:function(){var e=new Date(Date.now()),t=e.getDay()-1;-1===t&&(t=6);var n=e.getHours(),r=e.getMinutes(),a=Number(n+r/60);return i.default.some(this.props.info.data,function(e,n){var r=Number(e[0].substring(0,e[0].length-2)),i=Number(e[1].substring(0,e[1].length-2))+12;return n===t&&(a>=r&&a<=i)})?"Open":"Closed"}},{key:"getTimeRange",value:function(){var e=new Date(Date.now()).getDay()-1;-1===e&&(e=6);var t=this.props.info.data[e],n=t[0];n=n.substring(0,n.length-2),n+=":00AM";var r=t[1];return r=r.substring(0,r.length-2),{time1:n,time2:r+=":00PM"}}},{key:"render",value:function(){try{this.props.info.data[0]}catch(e){return a.default.createElement("div",null)}var e=this.getOpenNow(),t=this.getTimeRange();return a.default.createElement("div",{className:"sidebar-flexbox-col sidebar-info-list-element"},a.default.createElement("div",{onClick:this.clickHandler.bind(this),className:"sidebar-flexbox-row sidebar-opening-hours-title"},a.default.createElement("div",{className:"sidebar-info-list-element-icon"},a.default.createElement("i",{className:this.props.info.icon})),a.default.createElement("div",{className:"sidebar-flexbox-row sidebar-info-list-text sidebar-opening-hours-title"},a.default.createElement("div",null,a.default.createElement("div",{className:"sidebar-periods-element-day sidebar-open-now-text"},e)),a.default.createElement("div",null,a.default.createElement("div",{className:"sidebar-periods-element-time"},t.time1),a.default.createElement("div",{className:"sidebar-periods-element-time"},t.time2))),a.default.createElement("div",{className:"sidebar-expand-arrow",style:this.state.showPeriods?{transform:"rotate(180deg)"}:{transform:"rotate(0deg)"}},a.default.createElement("i",{className:"fas fa-angle-down fa-lg"}))),a.default.createElement("div",{className:"sidebar-flexbox-col sidebar-periods",style:this.state.showPeriods?{display:"flex"}:{display:"none"}},a.default.createElement(l,{opening_hours:this.props.info.data})))}}]),t}(),l=function(e){for(var t=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],n=[],r=0;r<7;r++){var i=t[r],o=e.opening_hours[r][0];o=o.substring(0,o.length-2),o+=":00AM";var s=e.opening_hours[r][1];s=s.substring(0,s.length-2);var l={weekday:i,time1:o,time2:s+=":00PM"},u=new Date(Date.now()).getDay()-1;-1===u&&(u=6),n.push(a.default.createElement("div",{key:r,className:"sidebar-flexbox-col sidebar-periods-element",style:{fontWeight:u===r?"bold":"normal"}},a.default.createElement("div",{className:"sidebar-flexbox-row sidebar-periods-element-info"},a.default.createElement("div",{className:"sidebar-periods-element-day"},l.weekday),a.default.createElement("div",{className:"sidebar-periods-element-time"},l.time1)),a.default.createElement("div",{className:"sidebar-periods-element-info-additional"},a.default.createElement("div",{className:"sidebar-periods-element-time"},l.time2))))}return a.default.createElement("div",{className:"sidebar-flexbox-col sidebar-periods"},n)};t.OpeningHours=s,t.Periods=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpeningHours=t.InfoListElement=t.InfoList=void 0;var r=i(n(0)),a=(i(n(3)),n(16));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){return e.info&&e.info.text?r.default.createElement("div",{className:"sidebar-flexbox-row sidebar-info-list-element"},r.default.createElement("div",{className:"sidebar-info-list-element-icon"},r.default.createElement("i",{className:e.info.icon})),r.default.createElement("div",{className:"sidebar-info-list-text"},r.default.createElement("a",{className:"sidebar-anchor",href:e.info.link.url,target:e.info.link.newTab?"_blank":""},e.info.text))):r.default.createElement("div",null)};t.InfoList=function(e){var t={openingHours:{data:e.restaurant.opening_hours,icon:"fas fa-clock fa-lg",link:{url:null,newTab:!1}},address:{text:e.restaurant.formatted_address,icon:"fas fa-map-marker-alt fa-lg",link:{url:null,newTab:!1}},phone:{text:e.restaurant.international_phone_number,icon:"fas fa-phone fa-lg",link:{url:"tel:"+e.restaurant.international_phone_number,newTab:!1}},website:{text:e.restaurant.url,icon:"fas fa-globe fa-lg",link:{url:e.restaurant.url,newTab:!0}},directions:{text:"Get Directions",icon:"fas fa-compass fa-lg",link:{url:e.restaurant.url,newTab:!0}}};return r.default.createElement("div",{className:"sidebar-flexbox-col sidebar-info-list"},r.default.createElement(a.OpeningHours,{info:t.openingHours}),r.default.createElement(o,{info:t.address}),r.default.createElement(o,{info:t.phone}),r.default.createElement(o,{info:t.url}),r.default.createElement(o,{info:t.directions}))},t.InfoListElement=o,t.OpeningHours=a.OpeningHours},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=s(n(0)),i=(s(n(4)),n(17)),o=s(n(15));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"render",value:function(){return this.props.restaurant&&this.props.restaurant.lat?a.default.createElement("div",{className:"sidebar-flexbox-col sidebar-app"},a.default.createElement(i.InfoList,{restaurant:this.props.restaurant})):window&&window.mapState?a.default.createElement("div",{className:"sidebar-flexbox-col sidebar-app"},a.default.createElement(i.InfoList,{restaurant:window.mapState}),a.default.createElement(o.default,{lat:window.mapState.lat,lng:window.mapState.lng})):a.default.createElement("div",null," Loading Sidebar... ")}}]),t}();t.App=l},function(e,t){e.exports=require("react-dom/server")},function(e,t,n){"use strict";var r=o(n(0)),a=o(n(19)),i=n(18);function o(e){return e&&e.__esModule?e:{default:e}}var s=n(1)(),l=n(13),u=n(12),c=(n(11),n(10)),d=(n(9),n(5)),f=n(4);s.use(u()),s.use(c.json()),s.options(function(e,t){t.send("OK")}),s.get("/bundle.js",function(e,t){t.sendFile(l.resolve("client/dist/bundle.js"))}),s.use("/api/restaurants",d),s.get("/api/restaurants/:id/string",function(e,t){console.log("Service req id: ",e.params.id),f.get("http://localhost:3003/api/restaurants/"+e.params.id+"/sidebar").then(function(e){t.send(a.default.renderToString(r.default.createElement(i.App,{restaurant:e.data}))+"%$%$^^%$%$"+JSON.stringify(e.data))}).catch(function(e){console.error("Failed to fetch restaurant data from server:",e)})});var p=process.env.PORT||3003;s.listen(p,function(){console.log("Listening on http://localhost:"+p)})}]);
